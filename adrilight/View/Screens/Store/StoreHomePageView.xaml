<UserControl x:Class="adrilight.View.StoreHomePageView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:hc="https://handyorg.github.io/handycontrol"
             xmlns:converters="clr-namespace:adrilight_shared.Converter;assembly=adrilight_shared"
             xmlns:local="clr-namespace:adrilight.View"
             xmlns:mdxam="clr-namespace:MdXaml;assembly=MdXaml"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:store="clr-namespace:adrilight_shared.Models.Store;assembly=adrilight_shared"
             mc:Ignorable="d"
             Background="{DynamicResource RegionBrush}"
             d:DataContext="{Binding Source={StaticResource Locator}, Path=AdrilightStoreHomePageViewModel}"
             DataContext="{Binding Source={StaticResource Locator}, Path=AdrilightStoreHomePageViewModel}">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary>
                    <converters:ColorToBrushConverter x:Key="ColorToBrushConverter" />
                    <converters:BrushToHexConverter x:Key="BrushToHexConverter" />
                    <BooleanToVisibilityConverter x:Key="boolToVisibilityConvert" />
                    <Style x:Key="ListViewContainerStyle"
                           TargetType="{x:Type ListBoxItem}">
                        <Setter Property="SnapsToDevicePixels"
                                Value="True" />
                        <Setter Property="Padding"
                                Value="0" />
                        <Setter Property="Background"
                                Value="{DynamicResource MainContentBackgroundBrush}" />
                        <Setter Property="BorderBrush"
                                Value="{DynamicResource SecondaryRegionBrush}" />
                        <Setter Property="FocusVisualStyle"
                                Value="{StaticResource FocusVisual}" />
                        <Setter Property="Width"
                                Value="auto" />
                        <Setter Property="Height"
                                Value="auto" />
                        <Setter Property="Focusable"
                                Value="False" />
                        <Setter Property="VerticalContentAlignment"
                                Value="Stretch" />
                        <Setter Property="HorizontalAlignment"
                                Value="Stretch" />
                        <Setter Property="HorizontalContentAlignment"
                                Value="Stretch" />
                        <Setter Property="Tag"
                                Value="{Binding Path=DataContext, RelativeSource={RelativeSource AncestorType=ListBox}}" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                    <Border x:Name="Bd"
                                            Margin="5,5"
                                            CornerRadius="7"
                                            BorderThickness="2"
                                            Background="{TemplateBinding Background}"
                                            Padding="{TemplateBinding Padding}"
                                            RenderTransformOrigin="0.5,0.5"
                                            SnapsToDevicePixels="true">
                                        <Border.RenderTransform>
                                            <ScaleTransform ScaleX="1.0"
                                                            ScaleY="1.0" />
                                        </Border.RenderTransform>
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Style.Triggers>
                                                    <EventTrigger RoutedEvent="MouseEnter">
                                                        <EventTrigger.Actions>
                                                            <BeginStoryboard>
                                                                <Storyboard>
                                                                    <DoubleAnimation Duration="0:0:0.1"
                                                                                     Storyboard.TargetProperty="RenderTransform.ScaleX"
                                                                                     To="1.01">
                                                                        <DoubleAnimation.EasingFunction>
                                                                            <BackEase EasingMode="EaseOut"
                                                                                      Amplitude="0.1" />
                                                                        </DoubleAnimation.EasingFunction>
                                                                    </DoubleAnimation>
                                                                    <DoubleAnimation Duration="0:0:0.1"
                                                                                     Storyboard.TargetProperty="RenderTransform.ScaleY"
                                                                                     To="1.01">
                                                                        <DoubleAnimation.EasingFunction>
                                                                            <BackEase EasingMode="EaseOut"
                                                                                      Amplitude="0.1" />
                                                                        </DoubleAnimation.EasingFunction>
                                                                    </DoubleAnimation>
                                                                </Storyboard>
                                                            </BeginStoryboard>
                                                        </EventTrigger.Actions>
                                                    </EventTrigger>
                                                    <EventTrigger RoutedEvent="MouseLeave">
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation Duration="0:0:0.1"
                                                                                 Storyboard.TargetProperty="RenderTransform.ScaleX"
                                                                                 To="1.0" />
                                                                <DoubleAnimation Duration="0:0:0.1"
                                                                                 Storyboard.TargetProperty="RenderTransform.ScaleY"
                                                                                 To="1.0" />
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />

                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <MultiTrigger>
                                            <MultiTrigger.Conditions>
                                                <Condition Property="IsMouseOver"
                                                           Value="True" />
                                                <Condition Property="IsSelected"
                                                           Value="False" />
                                            </MultiTrigger.Conditions>
                                            <Setter Property="BorderBrush"
                                                    TargetName="Bd"
                                                    Value="{DynamicResource SecondaryRegionBrush}" />
                                        </MultiTrigger>


                                        <MultiTrigger>
                                            <MultiTrigger.Conditions>
                                                <Condition Property="Selector.IsSelectionActive"
                                                           Value="False" />
                                                <Condition Property="IsSelected"
                                                           Value="True" />
                                            </MultiTrigger.Conditions>

                                            <!--<Setter Property="BorderBrush" TargetName="Bd" Value="{StaticResource PrimaryBrush}"/>-->
                                            <Setter Property="BorderBrush"
                                                    TargetName="Bd"
                                                    Value="Transparent" />
                                        </MultiTrigger>
                                        <MultiTrigger>
                                            <MultiTrigger.Conditions>
                                                <Condition Property="Selector.IsSelectionActive"
                                                           Value="True" />
                                                <Condition Property="IsSelected"
                                                           Value="True" />
                                            </MultiTrigger.Conditions>

                                            <!--<Setter Property="BorderThickness" TargetName="Bd" Value="6"/>-->
                                            <Setter Property="BorderBrush"
                                                    TargetName="Bd"
                                                    Value="{DynamicResource SecondaryRegionBrush}" />
                                        </MultiTrigger>
                                        <Trigger Property="IsEnabled"
                                                 Value="False">
                                            <Setter Property="TextElement.Foreground"
                                                    TargetName="Bd"
                                                    Value="{StaticResource {x:Static SystemColors.GrayTextBrushKey}}" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                    <DataTemplate x:Key="_verticalCardItemTemplate"
                                  DataType="{x:Type store:OnlineItemModel}">
                        <hc:Card Background="{DynamicResource MainContentBackgroundBrush}"
                                 BorderBrush="Transparent"
                                 ToolTip="{Binding Description}"
                                 hc:BorderElement.CornerRadius="7"
                                 Height="240"
                                 HorizontalAlignment="Stretch"
                                 Footer="{Binding Name}">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseLeftButtonDown">
                                    <i:InvokeCommandAction Command="{Binding Path=DataContext.ItemCardClickCommand, RelativeSource={RelativeSource AncestorType={x:Type local:StoreHomePageView}}}"
                                                           CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=hc:Card}}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <Border Margin="10"
                                    CornerRadius="7,7,7,7"
                                    Style="{StaticResource BorderClip}">
                                <Grid>
                                    <Grid.OpacityMask>
                                        <VisualBrush Visual="{Binding ElementName=Border1}" />
                                    </Grid.OpacityMask>
                                    <Border x:Name="Border1"
                                            CornerRadius="2"
                                            Background="{DynamicResource MainContentBackgroundBrush}" />
                                    <Image Source="{Binding Thumb}"
                                           RenderOptions.BitmapScalingMode="HighQuality"
                                           MaxWidth="100"
                                           Stretch="Uniform" />
                                </Grid>
                            </Border>

                            <hc:Card.FooterTemplate>
                                <DataTemplate>
                                    <!--Name and description+download-->
                                    <Grid Height="80">
                                        <!--Name and description-->
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*" />
                                                <RowDefinition Height="auto" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="0">
                                               
                                               
                                            </Grid>
                                            <hc:Row Margin="0,0,0,0">
                                                <hc:Col Span="24">
                                                    <TextBlock TextTrimming="CharacterEllipsis"
                                                               Margin="15,0"
                                                               VerticalAlignment="Top"
                                                               HorizontalAlignment="Left"
                                                               Text="{Binding DataContext.Name,RelativeSource={RelativeSource AncestorType=hc:Card}}"
                                                               FontWeight="SemiBold"
                                                               TextWrapping="Wrap"
                                                               FontSize="15"
                                                               Style="{DynamicResource TextBlockSubTitle}" />
                                                </hc:Col>
                                            </hc:Row>
                                            <!--download button-->
                                            <Grid  Grid.Row="1">
                                                <Grid Visibility="{Binding DataContext.IsLocalExisted,RelativeSource={RelativeSource AncestorType=hc:Card},Converter={StaticResource Boolean2VisibilityReConverter},Mode=TwoWay}">
                                                    <Button Visibility="{Binding DataContext.IsDownloading,RelativeSource={RelativeSource AncestorType=hc:Card},Converter={StaticResource Boolean2VisibilityReConverter}}"
                                                            Margin="10"
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Bottom"
                                                            Padding="2"
                                                            Width="40"
                                                            Height="25"
                                                            Foreground="{DynamicResource PrimaryBrush}"
                                                            BorderThickness="0"
                                                            Content="Get"
                                                            Command="{Binding Path=DataContext.ItemDownloadButtonClickCommand, RelativeSource={RelativeSource AncestorType={x:Type local:StoreHomePageView}}}"
                                                            CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=hc:Card}}">
                                                        <Button.Background>
                                                            <SolidColorBrush Color="{Binding Color, Source={StaticResource PrimaryBrush}}"
                                                                             Opacity="0.2" />
                                                        </Button.Background>
                                                    </Button>
                                                </Grid>
                                                <hc:CircleProgressBar ShowText="False"
                                                                      Visibility="{Binding DataContext.IsDownloading,RelativeSource={RelativeSource AncestorType=hc:Card},Converter={StaticResource Boolean2VisibilityConverter},Mode=TwoWay}"
                                                                      HorizontalAlignment="Right"
                                                                      VerticalAlignment="Bottom"
                                                                      Padding="2"
                                                                      Margin="10"
                                                                      Height="25"
                                                                      Width="25"
                                                                      IsIndeterminate="True"
                                                                      FontSize="10" />
                                                <Grid Visibility="{Binding DataContext.IsLocalExisted,RelativeSource={RelativeSource AncestorType=hc:Card},Converter={StaticResource Boolean2VisibilityConverter},Mode=TwoWay}">
                                                    <Button Margin="10"
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Bottom"
                                                            Padding="5"
                                                            Width="25"
                                                            Height="25"
                                                            BorderThickness="0"
                                                            hc:BorderElement.Circular="True"
                                                            IsHitTestVisible="False"
                                                            hc:IconElement.Geometry="{DynamicResource apply}"
                                                            Foreground="{DynamicResource SuccessBrush}">
                                                        <Button.Background>
                                                            <SolidColorBrush Color="{DynamicResource SuccessColor}"
                                                                             Opacity="0.3" />
                                                        </Button.Background>
                                                        <Button.Style>
                                                            <Style TargetType="Button"
                                                                   BasedOn="{StaticResource ButtonIconCircular}">
                                                                <Setter Property="Visibility"
                                                                        Value="Collapsed" />
                                                                <Style.Triggers>
                                                                    <MultiDataTrigger>
                                                                        <MultiDataTrigger.Conditions>
                                                                            <Condition Binding="{Binding DataContext.IsDownloading,RelativeSource={RelativeSource AncestorType=hc:Card}}"
                                                                                       Value="False" />
                                                                            <Condition Binding="{Binding DataContext.IsUpgradeAvailable,RelativeSource={RelativeSource AncestorType=hc:Card}}"
                                                                                       Value="False" />
                                                                        </MultiDataTrigger.Conditions>
                                                                        <Setter Property="Visibility"
                                                                                Value="Visible" />
                                                                    </MultiDataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Button.Style>
                                                    </Button>
                                                    <Button Margin="10"
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Bottom"
                                                            Padding="2"
                                                            Width="50"
                                                            Height="25"
                                                            BorderThickness="0"
                                                            Content="Update"
                                                            Foreground="{DynamicResource InfoBrush}"
                                                            Command="{Binding Path=DataContext.ItemDownloadButtonClickCommand, RelativeSource={RelativeSource AncestorType={x:Type local:StoreHomePageView}}}"
                                                            CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=hc:Card}}">
                                                        <Button.Background>
                                                            <SolidColorBrush Color="{DynamicResource InfoColor}"
                                                                             Opacity="0.3" />
                                                        </Button.Background>
                                                        <Button.Style>
                                                            <Style TargetType="Button"
                                                                   BasedOn="{StaticResource _mediumProfileDefaultButton}">
                                                                <Setter Property="Visibility"
                                                                        Value="Collapsed" />
                                                                <Style.Triggers>
                                                                    <MultiDataTrigger>
                                                                        <MultiDataTrigger.Conditions>
                                                                            <Condition Binding="{Binding DataContext.IsDownloading,RelativeSource={RelativeSource AncestorType=hc:Card}}"
                                                                                       Value="False" />
                                                                            <Condition Binding="{Binding DataContext.IsUpgradeAvailable,RelativeSource={RelativeSource AncestorType=hc:Card}}"
                                                                                       Value="True" />
                                                                        </MultiDataTrigger.Conditions>
                                                                        <Setter Property="Visibility"
                                                                                Value="Visible" />
                                                                    </MultiDataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Button.Style>
                                                    </Button>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Grid>
                                </DataTemplate>
                            </hc:Card.FooterTemplate>
                        </hc:Card>
                    </DataTemplate>
                    <DataTemplate x:Key="_verticalShortCardItemTemplate"
                                  DataType="{x:Type store:OnlineItemModel}">
                        <hc:Card Background="{DynamicResource MainContentBackgroundBrush}"
                                 BorderBrush="Transparent"
                                 ToolTip="{Binding Description}"
                                 hc:BorderElement.CornerRadius="7"
                                 Height="120"
                                 MinWidth="150"
                                 Footer="{Binding Name}">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseLeftButtonDown">
                                    <i:InvokeCommandAction Command="{Binding Path=DataContext.ItemCardClickCommand, RelativeSource={RelativeSource AncestorType={x:Type local:StoreHomePageView}}}"
                                                           CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=hc:Card}}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <Border Margin="10"
                                    CornerRadius="7,7,7,7"
                                    Style="{StaticResource BorderClip}">
                                <Grid  Margin="5">
                                    <Grid.OpacityMask>
                                        <VisualBrush Visual="{Binding ElementName=Border1}" />
                                    </Grid.OpacityMask>
                                    <Border x:Name="Border1"
                                            CornerRadius="2"
                                            Background="{DynamicResource MainContentBackgroundBrush}" />
                                    <Image Source="{Binding Thumb}"
                                           MaxWidth="100"
                                           RenderOptions.BitmapScalingMode="HighQuality"
                                           Stretch="Uniform" />
                                </Grid>
                            </Border>

                            <hc:Card.FooterTemplate>
                                <DataTemplate>
                                    <!--Name and description+download-->
                                    <Grid Height="60">
                                        <!--Name and description-->
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="0">
                                                <TextBlock TextTrimming="CharacterEllipsis"
                                                           Margin="15,0"
                                                           VerticalAlignment="Top"
                                                           HorizontalAlignment="Left"
                                                           Text="{Binding DataContext.Name,RelativeSource={RelativeSource AncestorType=hc:Card}}"
                                                           FontWeight="SemiBold"
                                                           Style="{DynamicResource TextBlockSubTitle}" />
                                            </Grid>
                                            <Grid Grid.Row="1">
                                                <TextBlock Margin="15,10"
                                                           VerticalAlignment="Top"
                                                           HorizontalAlignment="Left"
                                                           TextWrapping="Wrap"
                                                           Text="{Binding DataContext.Type,RelativeSource={RelativeSource AncestorType=hc:Card}}"
                                                           FontWeight="SemiBold"
                                                           Style="{DynamicResource TextBlockDefaultSecLight}" />
                                            </Grid>
                                            <!--download button-->
                                            <Grid  Grid.Row="1">
                                                <Grid Visibility="{Binding DataContext.IsLocalExisted,RelativeSource={RelativeSource AncestorType=hc:Card},Converter={StaticResource Boolean2VisibilityReConverter},Mode=TwoWay}">
                                                    <Button Visibility="{Binding DataContext.IsDownloading,RelativeSource={RelativeSource AncestorType=hc:Card},Converter={StaticResource Boolean2VisibilityReConverter}}"
                                                            Margin="10,0,10,10"
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Bottom"
                                                            Padding="2"
                                                            Width="40"
                                                            Height="25"
                                                            Foreground="{DynamicResource PrimaryBrush}"
                                                            BorderThickness="0"
                                                            Content="Get"
                                                            Command="{Binding Path=DataContext.ItemDownloadButtonClickCommand, RelativeSource={RelativeSource AncestorType={x:Type local:StoreHomePageView}}}"
                                                            CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=hc:Card}}">
                                                        <Button.Background>
                                                            <SolidColorBrush Color="{Binding Color, Source={StaticResource PrimaryBrush}}"
                                                                             Opacity="0.2" />
                                                        </Button.Background>
                                                    </Button>
                                                </Grid>
                                                <hc:CircleProgressBar ShowText="False"
                                                                      Visibility="{Binding DataContext.IsDownloading,RelativeSource={RelativeSource AncestorType=hc:Card},Converter={StaticResource Boolean2VisibilityConverter},Mode=TwoWay}"
                                                                      HorizontalAlignment="Right"
                                                                      VerticalAlignment="Bottom"
                                                                      Padding="2"
                                                                      Margin="10,0,10,10"
                                                                      Height="25"
                                                                      Width="25"
                                                                      IsIndeterminate="True"
                                                                      FontSize="10" />
                                                <Grid Visibility="{Binding DataContext.IsLocalExisted,RelativeSource={RelativeSource AncestorType=hc:Card},Converter={StaticResource Boolean2VisibilityConverter},Mode=TwoWay}">
                                                    <Button Margin="10,0,10,10"
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Bottom"
                                                            Padding="5"
                                                            Width="25"
                                                            Height="25"
                                                            BorderThickness="0"
                                                            hc:BorderElement.Circular="True"
                                                            IsHitTestVisible="False"
                                                            hc:IconElement.Geometry="{DynamicResource apply}"
                                                            Foreground="{DynamicResource SuccessBrush}">
                                                        <Button.Background>
                                                            <SolidColorBrush Color="{DynamicResource SuccessColor}"
                                                                             Opacity="0.3" />
                                                        </Button.Background>
                                                        <Button.Style>
                                                            <Style TargetType="Button"
                                                                   BasedOn="{StaticResource ButtonIconCircular}">
                                                                <Setter Property="Visibility"
                                                                        Value="Collapsed" />
                                                                <Style.Triggers>
                                                                    <MultiDataTrigger>
                                                                        <MultiDataTrigger.Conditions>
                                                                            <Condition Binding="{Binding DataContext.IsDownloading,RelativeSource={RelativeSource AncestorType=hc:Card}}"
                                                                                       Value="False" />
                                                                            <Condition Binding="{Binding DataContext.IsUpgradeAvailable,RelativeSource={RelativeSource AncestorType=hc:Card}}"
                                                                                       Value="False" />
                                                                        </MultiDataTrigger.Conditions>
                                                                        <Setter Property="Visibility"
                                                                                Value="Visible" />
                                                                    </MultiDataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Button.Style>
                                                    </Button>
                                                    <Button Margin="10"
                                                            HorizontalAlignment="Right"
                                                            VerticalAlignment="Bottom"
                                                            Padding="2"
                                                            Width="50"
                                                            Height="25"
                                                            BorderThickness="0"
                                                            Content="Update"
                                                            Foreground="{DynamicResource InfoBrush}"
                                                            Command="{Binding Path=DataContext.ItemDownloadButtonClickCommand, RelativeSource={RelativeSource AncestorType={x:Type local:StoreHomePageView}}}"
                                                            CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=hc:Card}}">
                                                        <Button.Background>
                                                            <SolidColorBrush Color="{DynamicResource InfoColor}"
                                                                             Opacity="0.3" />
                                                        </Button.Background>
                                                        <Button.Style>
                                                            <Style TargetType="Button"
                                                                   BasedOn="{StaticResource _mediumProfileDefaultButton}">
                                                                <Setter Property="Visibility"
                                                                        Value="Collapsed" />
                                                                <Style.Triggers>
                                                                    <MultiDataTrigger>
                                                                        <MultiDataTrigger.Conditions>
                                                                            <Condition Binding="{Binding DataContext.IsDownloading,RelativeSource={RelativeSource AncestorType=hc:Card}}"
                                                                                       Value="False" />
                                                                            <Condition Binding="{Binding DataContext.IsUpgradeAvailable,RelativeSource={RelativeSource AncestorType=hc:Card}}"
                                                                                       Value="True" />
                                                                        </MultiDataTrigger.Conditions>
                                                                        <Setter Property="Visibility"
                                                                                Value="Visible" />
                                                                    </MultiDataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Button.Style>
                                                    </Button>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Grid>
                                </DataTemplate>
                            </hc:Card.FooterTemplate>
                        </hc:Card>
                    </DataTemplate>
                    <DataTemplate x:Key="_horizontalCardItemTemplate"
                                  DataType="{x:Type store:OnlineItemModel}">
                        <Border Width="300"
                                BorderBrush="Transparent"
                              
                                CornerRadius="7"
                                Height="100"
                                Background="{DynamicResource MainContentBackgroundBrush}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Border Width="90"
                                        CornerRadius="4"
                                        Margin="5"
                                        Background="{DynamicResource SecondaryRegionBrush}">
                                    <Image Margin="5"
                                           Source="{Binding Thumb}"
                                           Stretch="Uniform" />

                                </Border>
                                <Grid Grid.Column="1">

                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="auto" />
                                        </Grid.RowDefinitions>
                                        <StackPanel>
                                            <TextBlock HorizontalAlignment="Left"
                                                       Text="{Binding Name}"
                                                       Margin="10,5"
                                                       Style="{DynamicResource TextBlockSubTitle}"
                                                       FontWeight="SemiBold"
                                                       TextTrimming="CharacterEllipsis" />
                                            <TextBlock Text="{Binding Type}"
                                                       HorizontalAlignment="Left"
                                                       Margin="10,5"
                                                       Style="{DynamicResource TextBlockDefaultSecLight}"
                                                       FontWeight="SemiBold"
                                                       TextTrimming="CharacterEllipsis" />
                                        </StackPanel>
                                        <Grid  Grid.Row="1">
                                            <Grid Visibility="{Binding IsLocalExisted,Converter={StaticResource Boolean2VisibilityReConverter},Mode=TwoWay}">
                                                <Button Visibility="{Binding DataContext.IsDownloading,RelativeSource={RelativeSource AncestorType=hc:Card},Converter={StaticResource Boolean2VisibilityReConverter}}"
                                                        Margin="10"
                                                        HorizontalAlignment="Right"
                                                        VerticalAlignment="Bottom"
                                                        Padding="2"
                                                        Width="40"
                                                        Height="25"
                                                        Foreground="{DynamicResource PrimaryBrush}"
                                                        BorderThickness="0"
                                                        Content="Get"
                                                        Command="{Binding Path=DataContext.ItemDownloadButtonClickCommand, RelativeSource={RelativeSource AncestorType={x:Type local:StoreHomePageView}}}"
                                                        CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=hc:Card}}">
                                                    <Button.Background>
                                                        <SolidColorBrush Color="{Binding Color, Source={StaticResource PrimaryBrush}}"
                                                                         Opacity="0.2" />
                                                    </Button.Background>
                                                </Button>
                                            </Grid>
                                            <hc:CircleProgressBar ShowText="False"
                                                                  Visibility="{Binding IsDownloading,Converter={StaticResource Boolean2VisibilityConverter},Mode=TwoWay}"
                                                                  HorizontalAlignment="Right"
                                                                  VerticalAlignment="Bottom"
                                                                  Padding="2"
                                                                  Margin="10"
                                                                  Height="25"
                                                                  Width="25"
                                                                  IsIndeterminate="True"
                                                                  FontSize="10" />
                                            <Grid Visibility="{Binding IsLocalExisted, Converter={StaticResource Boolean2VisibilityConverter},Mode=TwoWay}">
                                                <Button Margin="10"
                                                        HorizontalAlignment="Right"
                                                        VerticalAlignment="Bottom"
                                                        Padding="5"
                                                        Width="25"
                                                        Height="25"
                                                        BorderThickness="0"
                                                        hc:BorderElement.Circular="True"
                                                        IsHitTestVisible="False"
                                                        hc:IconElement.Geometry="{DynamicResource apply}"
                                                        Foreground="{DynamicResource SuccessBrush}">
                                                    <Button.Background>
                                                        <SolidColorBrush Color="{DynamicResource SuccessColor}"
                                                                         Opacity="0.3" />
                                                    </Button.Background>
                                                    <Button.Style>
                                                        <Style TargetType="Button"
                                                               BasedOn="{StaticResource ButtonIconCircular}">
                                                            <Setter Property="Visibility"
                                                                    Value="Collapsed" />
                                                            <Style.Triggers>
                                                                <MultiDataTrigger>
                                                                    <MultiDataTrigger.Conditions>
                                                                        <Condition Binding="{Binding IsDownloading}"
                                                                                   Value="False" />
                                                                        <Condition Binding="{Binding IsUpgradeAvailable}"
                                                                                   Value="False" />
                                                                    </MultiDataTrigger.Conditions>
                                                                    <Setter Property="Visibility"
                                                                            Value="Visible" />
                                                                </MultiDataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Button.Style>
                                                </Button>
                                                <Button Margin="10"
                                                        HorizontalAlignment="Right"
                                                        VerticalAlignment="Bottom"
                                                        Padding="2"
                                                        Width="50"
                                                        Height="25"
                                                        BorderThickness="0"
                                                        Content="Update"
                                                        Foreground="{DynamicResource InfoBrush}"
                                                        Command="{Binding Path=DataContext.ItemDownloadButtonClickCommand, RelativeSource={RelativeSource AncestorType={x:Type local:StoreHomePageView}}}"
                                                        CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=hc:Card}}">
                                                    <Button.Background>
                                                        <SolidColorBrush Color="{DynamicResource InfoColor}"
                                                                         Opacity="0.3" />
                                                    </Button.Background>
                                                    <Button.Style>
                                                        <Style TargetType="Button"
                                                               BasedOn="{StaticResource _mediumProfileDefaultButton}">
                                                            <Setter Property="Visibility"
                                                                    Value="Collapsed" />
                                                            <Style.Triggers>
                                                                <MultiDataTrigger>
                                                                    <MultiDataTrigger.Conditions>
                                                                        <Condition Binding="{Binding IsDownloading}"
                                                                                   Value="False" />
                                                                        <Condition Binding="{Binding IsUpgradeAvailable}"
                                                                                   Value="True" />
                                                                    </MultiDataTrigger.Conditions>
                                                                    <Setter Property="Visibility"
                                                                            Value="Visible" />
                                                                </MultiDataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Button.Style>
                                                </Button>
                                            </Grid>
                                        </Grid>
                                    </Grid>
                                </Grid>

                            </Grid>
                        </Border>
                    </DataTemplate>
                </ResourceDictionary>


            </ResourceDictionary.MergedDictionaries>

        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>

        <ItemsControl VerticalAlignment="Top"
                      HorizontalAlignment="Stretch"
                      HorizontalContentAlignment="Stretch"
                      ItemsSource="{Binding AvailableCarousels}"
                      ScrollViewer.CanContentScroll="False">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Grid Margin="20,15"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Stretch">
                        <StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Button HorizontalAlignment="Left"
                                        Margin="5"
                                        Command="{Binding Path=DataContext.SeAllButtonClickCommand, RelativeSource={RelativeSource AncestorType={x:Type local:StoreHomePageView}}}"
                                        CommandParameter="{Binding .}"
                                        Grid.Column="1"
                                        Height="40"
                                        Padding="5,0"
                                        hc:BorderElement.CornerRadius="7"
                                        BorderBrush="Transparent">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Margin="5,0,5,5"
                                                   TextAlignment="Center"
                                                   HorizontalAlignment="Left"
                                                   Text="{Binding Name}"
                                                   Foreground="#E5E5E5"
                                                   FontWeight="SemiBold"
                                                   FontSize="20"
                                                   Style="{DynamicResource TextBlockTitle}" />
                                        <Path Stretch="Uniform"
                                              Margin="0,0,0,0"
                                              Data="{DynamicResource showMoreRight}"
                                              Width="12"
                                              Height="12"
                                              Fill="{DynamicResource PrimaryTextBrush}" />
                                    </StackPanel>

                                </Button>
                            </Grid>

                            <Grid>
                                <ListBox ScrollViewer.CanContentScroll="False"
                                         hc:ScrollViewerAttach.IsDisabled="True"
                                         ItemContainerStyle="{DynamicResource ListViewContainerStyle}"
                                         HorizontalAlignment="Stretch"
                                         HorizontalContentAlignment="Stretch"
                                         BorderThickness="0"
                                         ItemsSource="{Binding CarouselItem}">
                                    <ListBox.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Rows="1"
                                                         Columns="{Binding ItemsSource.Count}" />
                                        </ItemsPanelTemplate>
                                    </ListBox.ItemsPanel>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <ContentControl Content="{Binding}">
                                                <ContentControl.Style>
                                                    <Style TargetType="ContentControl">
                                                        <Setter Property="ContentTemplate"
                                                                Value="{DynamicResource _verticalCardItemTemplate}" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding Path=DataContext.TemplateSelector, RelativeSource={RelativeSource AncestorType={x:Type ListBox}}}"
                                                                         Value="0">
                                                                <Setter Property="ContentTemplate"
                                                                        Value="{DynamicResource _verticalCardItemTemplate}" />
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Path=DataContext.TemplateSelector, RelativeSource={RelativeSource AncestorType={x:Type ListBox}}}"
                                                                         Value="1">
                                                                <Setter Property="ContentTemplate"
                                                                        Value="{DynamicResource _verticalShortCardItemTemplate}" />
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding Path=DataContext.TemplateSelector, RelativeSource={RelativeSource AncestorType={x:Type ListBox}}}"
                                                                         Value="2">
                                                                <Setter Property="ContentTemplate"
                                                                        Value="{DynamicResource _horizontalCardItemTemplate}" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </ContentControl.Style>
                                            </ContentControl>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                    <ListBox.Resources>
                                        <ItemsPanelTemplate x:Key="_listBoxStackPanelTemplate">
                                            <StackPanel Orientation="Horizontal">

                                            </StackPanel>
                                        </ItemsPanelTemplate>
                                        <ItemsPanelTemplate x:Key="_listBoxUniformGridTemplate">
                                            <UniformGrid HorizontalAlignment="Stretch"
                                                         Rows="1"
                                                         Columns="3">

                                            </UniformGrid>
                                        </ItemsPanelTemplate>
                                    </ListBox.Resources>

                                    <ListBox.Template>
                                        <ControlTemplate TargetType="{x:Type ListBox}">
                                            <hc:ScrollViewer hc:ScrollViewerAttach.IsDisabled="True"
                                                             HorizontalContentAlignment="Stretch"
                                                             HorizontalScrollBarVisibility="Hidden"
                                                             VerticalScrollBarVisibility="Hidden"
                                                             IsInertiaEnabled="True">
                                                <ItemsPresenter />
                                            </hc:ScrollViewer>
                                        </ControlTemplate>
                                    </ListBox.Template>
                                </ListBox>
                            </Grid>
                        </StackPanel>
                    </Grid>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <VirtualizingStackPanel VirtualizingPanel.IsVirtualizing="True"
                                            VirtualizingPanel.VirtualizationMode="Recycling" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.Template>
                <ControlTemplate TargetType="{x:Type ItemsControl}">
                    <hc:ScrollViewer hc:ScrollViewerAttach.Orientation="Vertical"
                                     HorizontalScrollBarVisibility="Hidden"
                                     VerticalScrollBarVisibility="Auto"
                                     IsInertiaEnabled="True">
                        <ItemsPresenter />
                    </hc:ScrollViewer>
                </ControlTemplate>
            </ItemsControl.Template>
        </ItemsControl>
    </Grid>
</UserControl>